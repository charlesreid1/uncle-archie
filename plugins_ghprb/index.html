



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://pages.charlesreid1.com/uncle-jenkins/plugins_ghprb/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.7.2">
    
    
      
        <title>Github Pull Request Builder - uncle-jenkins</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#github-pull-request-builder-ghprb-jenkins-plugin" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://pages.charlesreid1.com/uncle-jenkins" title="uncle-jenkins" class="md-header-nav__button md-logo">
          
            <img src="../images/unclejenkinswt.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                uncle-jenkins
              </span>
              <span class="md-header-nav__topic">
                Github Pull Request Builder
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/charlesreid1/uncle-jenkins" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      uncle-jenkins
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/unclejenkinswt.svg" width="48" height="48">
      
    </span>
    uncle-jenkins
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/charlesreid1/uncle-jenkins" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      uncle-jenkins
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Index" class="md-nav__link">
      Index
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Preparing Jenkins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Preparing Jenkins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installing/" title="Installing Jenkins" class="md-nav__link">
      Installing Jenkins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nginx/" title="Nginx and Jenkins" class="md-nav__link">
      Nginx and Jenkins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuring/" title="Configuring Jenkins" class="md-nav__link">
      Configuring Jenkins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Jenkins Plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Jenkins Plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/" title="Installing Plugins" class="md-nav__link">
      Installing Plugins
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Github Pull Request Builder
      </label>
    
    <a href="./" title="Github Pull Request Builder" class="md-nav__link md-nav__link--active">
      Github Pull Request Builder
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-jenkins-ghprb-plugin" title="installing jenkins GHPRB plugin" class="md-nav__link">
    installing jenkins GHPRB plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-to-the-jenkins-configuration-page" title="getting to the jenkins configuration page" class="md-nav__link">
    getting to the jenkins configuration page
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-jenkins-ghprb-plugin" title="configuring jenkins GHPRB plugin" class="md-nav__link">
    configuring jenkins GHPRB plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-configuration" title="basic configuration" class="md-nav__link">
    basic configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authenticating-with-the-github-api" title="authenticating with the Github API" class="md-nav__link">
    authenticating with the Github API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-authentication-with-github" title="testing authentication with Github" class="md-nav__link">
    testing authentication with Github
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-jenkins-ghprb-plugin" title="installing jenkins GHPRB plugin" class="md-nav__link">
    installing jenkins GHPRB plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-to-the-jenkins-configuration-page" title="getting to the jenkins configuration page" class="md-nav__link">
    getting to the jenkins configuration page
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-jenkins-ghprb-plugin" title="configuring jenkins GHPRB plugin" class="md-nav__link">
    configuring jenkins GHPRB plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-configuration" title="basic configuration" class="md-nav__link">
    basic configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authenticating-with-the-github-api" title="authenticating with the Github API" class="md-nav__link">
    authenticating with the Github API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-authentication-with-github" title="testing authentication with Github" class="md-nav__link">
    testing authentication with Github
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="github-pull-request-builder-ghprb-jenkins-plugin">Github Pull Request Builder (GHPRB) Jenkins Plugin<a class="headerlink" href="#github-pull-request-builder-ghprb-jenkins-plugin" title="Permanent link">&para;</a></h1>
<p>Also see the <a href="../plugins/">plugins</a> page.</p>
<h2 id="installing-jenkins-ghprb-plugin">installing jenkins GHPRB plugin<a class="headerlink" href="#installing-jenkins-ghprb-plugin" title="Permanent link">&para;</a></h2>
<p>To enable Jenkins to build Pull Requests and act as a PR check, we need
to install the "Github Pull Request Builder" plugin into Jenkins.</p>
<p>Use Control + F to search for "Github Pull Request Builder" and check
the box next to it. Then click the button at the bottom that says
"Install without restart."</p>
<p>Now click the Installed tab on the plugin manager page to see a list
of plugins that are installed on the server: </p>
<p><img src="/images/jenkins-pm-inst.png" width="500px" /></p>
<p>Control + F search for "Github Pull Request Builder" and you should
see it come up:</p>
<p><img src="/images/jenkins-pm-inst-2.png" width="500px" /></p>
<p>Don't bother clicking the link, since it will take you to
the Jenkins wiki page for the plugin. </p>
<h2 id="getting-to-the-jenkins-configuration-page">getting to the jenkins configuration page<a class="headerlink" href="#getting-to-the-jenkins-configuration-page" title="Permanent link">&para;</a></h2>
<p>To configure the GHPRB plugin, start from the home view:</p>
<p><img src="/images/jenkins-login-post.png" width="500px" /></p>
<p>After clicking "Manage Jenkins" on the left, you should see a list of menu items:</p>
<p><img src="/images/jenkins-manage.png" width="500px" /></p>
<p>After clicking the first item, "Configure System", you should see a page with
many sections:</p>
<p><img src="/images/jenkins-configure.png" width="500px" /></p>
<p>Let's go through how to set up the pull request build plugin
to properly authenticate with Github.</p>
<h2 id="configuring-jenkins-ghprb-plugin">configuring jenkins GHPRB plugin<a class="headerlink" href="#configuring-jenkins-ghprb-plugin" title="Permanent link">&para;</a></h2>
<p>Note: these steps are based largely on the README in the
<a href="https://github.com/jenkinsci/ghprb-plugin/blob/master/README.md">Github Pull Request Builder plugin
repo</a>
(on Github, of course).</p>
<p>Once at the configuration page, scroll down to the section titled
"Github Pull Request Builder" (or Control + F it).</p>
<p><img src="/images/jenkins-ghprb-1.png" width="500px" /></p>
<p>This has a couple of key fields:</p>
<ul>
<li>
<p>Github server API URL: this is for Github Enterprise users; leave as is if
  using Github.com</p>
</li>
<li>
<p>Credentials: this is where we will add our Github credentials (log in under
  the bot account we want Jenkins to use).</p>
</li>
<li>
<p>Connect to API: we will use this to test our credentials.</p>
</li>
<li>
<p>Advanced: this button will open up a whole host of options. These are covered
  below.</p>
</li>
</ul>
<h2 id="basic-configuration">basic configuration<a class="headerlink" href="#basic-configuration" title="Permanent link">&para;</a></h2>
<h3 id="authenticating-with-the-github-api">authenticating with the Github API<a class="headerlink" href="#authenticating-with-the-github-api" title="Permanent link">&para;</a></h3>
<p>Click the "Add" button next to credentials and select Jenkins as your 
credentials provider. Create a credential of Kind "Secret Text".
For the Secret, you will enter a Github Personal Access Token,
which we'll cover next.</p>
<p>Here is what the jenkins credentials provider looks like:</p>
<p><img src="/images/jenkins-ghprb-2.png" width="500px" /></p>
<p>To create a Github Authentication Token, log in to Github using the account
jenkins will review PRs as. Go to the Settings page and click Developer Settings,
then Personal acess tokens, or just visit <a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a>
once you are logged in.</p>
<p>Now click "Generate New Token". You will see some options like those shown
below. Configure the check boxes to match those shown in the image below:</p>
<p><img src="/images/jenkins-ghprb-3.png" width="500px" /></p>
<p>Now create a token. The token will only be shown once, and cannot be viewed
again, so store it somewhere safe like a password manager.</p>
<p>Back at the jenkins credentials provider window, enter the
API key you generated into the "Secret" field. Leave the
other fields blank. Click Add.</p>
<p>Here's what the Github Pull Request Builder section of the jenkins configuration 
page will look like once you've authenticated with Github: </p>
<p><img src="/images/jenkins-ghprb-3.png" width="500px" /></p>
<p>Now test the authentication mechanism by clicking Test Credentials.</p>
<h3 id="testing-authentication-with-github">testing authentication with Github<a class="headerlink" href="#testing-authentication-with-github" title="Permanent link">&para;</a></h3>
<p>There are several tests to run to ensure Github authentication is
working okay.</p>
<p>Starting from the Github Pull Request Builder section of the configuration
page, click the Test Credentials button:</p>
<p><img src="/images/jenkins-ghprb-4.png" width="500px" /></p>
<p>This opens several checkboxes with options. To run the given test,
you check the box. (Weird, I know.)</p>
<p><img src="/images/jenkins-ghprb-5-test-1.png" width="500px" /></p>
<p>When you check the "Test basic connection to Github" box, you'll see
the results of checking that you can connect to Github:</p>
<p><img src="/images/jenkins-ghprb-5-test-2.png" width="500px" /></p>
<p>Enter a repository that your Jenkins user should have access to, 
and then check the next checkbox, "Test Permissions to a Repository":</p>
<p><img src="/images/jenkins-ghprb-5-test-3.png" width="500px" /></p>
<p>For the next test, you should create a pull request in the repository
that you entered in the text box. You can do this easily by opening
the README file in your repository, clicking the pencil "Edit" button
in Github, and adding an empty line at the top of the file.</p>
<p>When you click the green submit button, make sure you select the option
to create a new branch and start a pull request. Once you have submitted
the change as a pull request, click the "Pull Requests" tab of the repository
and find the pull request's number. In the example below, the pull request
is #1:</p>
<p><img src="/images/jenkins-ghprb-5-test-4.png" width="500px" /></p>
<p>When you click "Comment to Issue", Jenkins will use the Github credentials
to attempt to leave the comment specified in the text box in the pull
request thread.</p>
<p>Here's what it should look like if everything goes according to plan:</p>
<p><img src="/images/jenkins-ghprb-5-test-5.png" width="500px" /></p>
<p>Let's keep moving through the tests, there is still one more to get through!</p>
<p>The last test is the most important, and that is testing whether the Jenkins
server can mark a pull request as passing or failing checks, or whether they
resulted in an error.</p>
<p>Click the "Test updating commit status" button and it will give several
options to set. For the commit hash, use the commit hash of the single
commit in the pull request. We will test setting the state to FAILURE.</p>
<p>The other settings will make more sense in context, but we can set a
URL that links to a page with more details on the build, a message
to post about the failure, and some context (more info).</p>
<p>Here is what the settings look like filled out:</p>
<p><img src="/images/jenkins-ghprb-5-test-6.png" width="500px" /></p>
<p>When "Update Status" is clicked it results in the following change to
the pull request page:</p>
<p><img src="/images/jenkins-ghprb-5-test-7.png" width="500px" /></p>
<p>Note that the pull request can still be merged, but in the repository
settings we can require that build checks pass before any pull requests
can be merged.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../plugins/" title="Installing Plugins" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installing Plugins
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 <a href="https://charlesreid1.com">Charles Reid</a>, released under the <a href="https://opensource.org/licenses/MIT">MIT license</a> <br /><br /> <div>Icon made by Freepik, obtained from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>, used under a <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div> license.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.0cf9b500.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:".."}})</script>
      
        <script src="../search/require.js"></script>
      
        <script src="../search/search.js"></script>
      
    
    
      
    
  </body>
</html>